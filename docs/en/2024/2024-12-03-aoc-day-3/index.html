<!DOCTYPE html>
<html lang="en-US">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  
  <meta name="author" content="">

  
  
  <meta name="description" content="(task | solution)
As I reached the third day of my adventure, I had already learned something new that significantly improves the process: the devcontainer.json file can handle creating and running the Docker container for me. This saves the trouble of manually building and running it—essentially saving two commands on the command line, which adds up to about three seconds. Still, it’s an improvement. However, I am not going to use it.
I had initially planned to solve today’s riddle in BASIC—the first programming language I learned 30 years ago. However, it turns out that deploying a BASIC compiler into a container isn">
  

  
  <link rel="icon" href="http://localhost:1313/images/favicon.svg">

  
  
  <meta name="keywords" content=" Advent of Code  AoC  Python  List Comprehension  Regex  Text Processing  Algorithm  Puzzle  Solution ">
  

  
  

  
  <meta property="og:url" content="http://localhost:1313/en/2024/2024-12-03-aoc-day-3/">
  <meta property="og:site_name" content="Nicky Reinert">
  <meta property="og:title" content="Advent of Code - Day 3 - Multiplications (Python)">
  <meta property="og:description" content="(task | solution) As I reached the third day of my adventure, I had already learned something new that significantly improves the process: the devcontainer.json file can handle creating and running the Docker container for me. This saves the trouble of manually building and running it—essentially saving two commands on the command line, which adds up to about three seconds. Still, it’s an improvement. However, I am not going to use it.
I had initially planned to solve today’s riddle in BASIC—the first programming language I learned 30 years ago. However, it turns out that deploying a BASIC compiler into a container isn">
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
    <meta property="article:section" content="2024">
    <meta property="article:published_time" content="2024-12-03T12:34:56+02:00">
    <meta property="article:modified_time" content="2025-08-20T16:16:37+02:00">
    <meta property="article:tag" content="Advent of Code">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="Solution">
    <meta property="article:tag" content="Tutorial">


  
  <link rel="canonical" href="http://localhost:1313/en/2024/2024-12-03-aoc-day-3/">

  
  
  
  <meta itemprop="name" content="Advent of Code - Day 3 - Multiplications (Python)">
  <meta itemprop="description" content="(task | solution) As I reached the third day of my adventure, I had already learned something new that significantly improves the process: the devcontainer.json file can handle creating and running the Docker container for me. This saves the trouble of manually building and running it—essentially saving two commands on the command line, which adds up to about three seconds. Still, it’s an improvement. However, I am not going to use it.
I had initially planned to solve today’s riddle in BASIC—the first programming language I learned 30 years ago. However, it turns out that deploying a BASIC compiler into a container isn">
  <meta itemprop="datePublished" content="2024-12-03T12:34:56+02:00">
  <meta itemprop="dateModified" content="2025-08-20T16:16:37+02:00">
  <meta itemprop="wordCount" content="1022">
  <meta itemprop="keywords" content="Advent of Code,AoC,Python,List Comprehension,Regex,Text Processing,Algorithm,Puzzle,Solution">

  
  <link media="screen" rel="stylesheet" href='http://localhost:1313/css/common.css'>
  <link media="screen" rel="stylesheet" href='http://localhost:1313/css/content.css'>

  
  
  <title>Advent of Code - Day 3 - Multiplications (Python) - Nicky Reinert</title>
  

  
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Advent of Code - Day 3 - Multiplications (Python)">
  <meta name="twitter:description" content="(task | solution) As I reached the third day of my adventure, I had already learned something new that significantly improves the process: the devcontainer.json file can handle creating and running the Docker container for me. This saves the trouble of manually building and running it—essentially saving two commands on the command line, which adds up to about three seconds. Still, it’s an improvement. However, I am not going to use it.
I had initially planned to solve today’s riddle in BASIC—the first programming language I learned 30 years ago. However, it turns out that deploying a BASIC compiler into a container isn">


  
<script type="application/ld+json">
[
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Advent of Code - Day 3 - Multiplications (Python)",
    "description": "(task | solution) As I reached the third day of my adventure, I had already learned something new that significantly improves the process: the devcontainer.json …",
    "datePublished": "2024-12-03T12:34:56\u002b02:00",
    "dateModified": "2025-08-20T16:16:37\u002b02:00",
    "author": {
      "@type": "Person",
      "name": "",
      "url": "http:\/\/localhost:1313\/"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Nicky Reinert",
      "url": "http:\/\/localhost:1313\/",
      "logo": {
        "@type": "ImageObject",
        "url": "http:\/\/localhost:1313\/images\/logo.png"
      }
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "http:\/\/localhost:1313\/en\/2024\/2024-12-03-aoc-day-3\/"
    },
    
    "image": {
      "@type": "ImageObject",
      "url": "http:\/\/localhost:1313\/images\/posts\/placeholder.jpg",
      "width": 1200,
      "height": 630
    },
    
    "url": "http:\/\/localhost:1313\/en\/2024\/2024-12-03-aoc-day-3\/",
    "wordCount":  1022 ,
    
    "timeRequired": "PT5M",
    
    
    "keywords": ["Advent of Code", "Python", "Solution", "Tutorial"],
    
    
    "articleSection": ["development", "aoc2024"],
    
    
    "abstract": "A detailed write-up of the author\u0027s Python solution to Day 3 of the Advent of Code 2024 challenge. The article showcases the power of Python\u0027s list comprehensions for parsing text and performing calculations, including a complex nested solution for handling conditional logic in Part 2.",
    
    
    "genre": "solution_writeup",
    
    
    "educationalLevel": "intermediate",
    
    "inLanguage": "en"
  },
  
  {
    "@context": "https://schema.org",
    "@type": "TechArticle",
    "headline": "Advent of Code - Day 3 - Multiplications (Python)",
    "description": "(task | solution) As I reached the third day of my adventure, I had already learned something new that significantly improves the process: the devcontainer.json …",
    
    "proficiencyLevel": "intermediate",
    
    
    "dependencies": ["Good understanding of Python programming", "Familiarity with list comprehensions and regular expressions is helpful"],
    
    
    "about": [
      
      
      {
        "@type": "Thing",
        "name": "Advent of Code"
      }
      
      , 
      {
        "@type": "Thing",
        "name": "Python"
      }
      
      , 
      {
        "@type": "Thing",
        "name": "List Comprehension"
      }
      
      , 
      {
        "@type": "Thing",
        "name": "Regular Expressions"
      }
      
      , 
      {
        "@type": "Thing",
        "name": "Problem-Solving"
      }
      
      , 
      {
        "@type": "Thing",
        "name": "Text Processing"
      }
      
    ],
    
    "datePublished": "2024-12-03T12:34:56\u002b02:00",
    "dateModified": "2025-08-20T16:16:37\u002b02:00",
    "author": {
      "@type": "Person",
      "name": ""
    }
  },
  
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Nicky Reinert",
    "url": "http:\/\/localhost:1313\/",
    "description": "Blog \u0026 projects by Nicky Reinert (Institute for Digital Challenges): web development \u0026 software development, SEO \u0026 analytics, hosting \u0026 DevOps, WordPress \u0026 Hugo, tools \u0026 projects, data protection \u0026 digital culture — plus content on AI and autism \u0026 society.",
    "inLanguage": "en",
    "potentialAction": {
      "@type": "SearchAction",
      "target": {
        "@type": "EntryPoint",
        "urlTemplate": "http:\/\/localhost:1313\/search/?q={search_term_string}"
      },
      "query-input": "required name=search_term_string"
    }
  }
]
</script>

  
<link rel="stylesheet" href='http://localhost:1313/css/single.css'>

  

<script defer src="/js/alpine.min.js"></script>


</head>

<body>
  <div id="wrapper">
    <header id="header">
  <span class="header-content">
    <p class="left"><a id="site-title" href="http://localhost:1313/">Nicky Reinert</a></p>
    <p class="center">//</p>
    <p class="right">Institute for Digital Challenges</p>
  </span>

  <br />
  
  <div class="footnote">
    <span class="nav-bar-item"><b>extern</b>
      <a target="_blank" class="link" href="https://medium.com/@nickyreinert">medium.com</a>
      <a target="_blank" class="link" href="https://www.linkedin.com/in/nickyreinert/">LinkedIn</a>
      <a target="_blank" class="link" href="https://www.instagram.com/nickyreinert/?hl=de">Instagram</a>
      <a target="_blank" class="link" href="https://www.youtube.com/channel/UC832c48LxmzLd5nIL_Ny7sA">YouTube</a>
      <a target="_blank" class="link" href="https://github.com/nickyreinert">GitHub</a>
      <a target="_blank" class="link" href="https://shop.its-not-a-brand.com/">"Merch"</a>
      <a target="_blank" class="link" href="https://ministerium-für-digitale-herausforderungen.de">ministerium</a>
      <a target="_blank" class="link" href="https://institut-fdh.de//">institut</a>
      <a target="_blank" class="link" href="https://fantastokrat.de/">fantastokrat</a>
      <a target="_blank" class="link" href="https://open.spotify.com/show/3383SHVRGTvJ9cEXU3UuE5">random knowledge</a>
    </span>

    <br />

    <span class="nav-bar-item"><b>literatur</b>
      <a target="_blank" class="link" href="https://amzn.eu/d/5LYXyUu">Dit is Berlin - B.N.H.K.</a>
      <a target="_blank" class="link" href="https://amzn.eu/d/3hWCrK1">Geometrische Gottheiten</a>
    </span>
    
    <nav><b>intern</b>
      
      <span class="nav-bar-item">
        <a class="link" href="/categories/nerdenz/">nerdenz</a>
      </span>
      
      <span class="nav-bar-item">
        <a class="link" href="/categories/blog/">blog</a>
      </span>
      
      <span class="nav-bar-item">
        <a class="link" href="/categories/anleitungen/">anleitungen</a>
      </span>
      
      <span class="nav-bar-item">
        <a class="link" href="/categories/development/">development</a>
      </span>
      
      <span class="nav-bar-item">
        <a class="link" href="/categories/hosting/">hosting</a>
      </span>
      
      <span class="nav-bar-item">
        <a class="link" href="/categories/projekte/">projekte</a>
      </span>
      
      <span class="nav-bar-item">
        <a class="link" href="/categories/tools/">tools</a>
      </span>
      
      <span class="nav-bar-item">
        <a class="link" href="/categories/wordpress/">wordpress</a>
      </span>
      
      <span class="nav-bar-item">
        <a class="link" href="/categories/autismus/">autismus</a>
      </span>
      
    </nav>
    
  </div>

  <br />

</header>

    
<main id="main" class="post">
  
  
  <div class="post-header">
    <div class="navigation">
      
      <a class="link prev" href="/en/2024/2024-12-02-aoc-day-2/">&lt;&lt;&lt;</a>
      
      
      <h1 style="flex-grow: 1; text-align: center;" itemprop="headline">Advent of Code - Day 3 - Multiplications (Python)</h1>
      
      
      <a class="link next" href="/en/2024/2024-12-04-aoc-day-4/">>>></a>
      
    </div>
  </div>
  
  
  <div class="post-date">December 3, 2024</div>

  
  
  
  
  
  
  
  
  <details style="margin-top: 2rem; margin-bottom: 2rem;">
    <summary>
      <b>Table of Contents</b>
    </summary>
    <div class="toc"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#solution-of-the-first-part">Solution of the first part</a></li>
      </ul>
    </li>
    <li><a href="#solution-of-the-second-part">Solution of the second part</a></li>
    <li><a href="#whats-up-python">Whats up, Python?</a></li>
  </ul>
</nav></div>
  </details>
  
  
  
  
  <article style="border-top: 2px solid #878787;" class="content">
    
    <p>(<a href="https://adventofcode.com/2024/day/3/">task</a> | <a href="https://github.com/nickyreinert/aoc2024/tree/main/solutions/day3%20-%20python">solution</a>)
As I reached the third day of my adventure, I had already learned something new that significantly improves the process: the <code>devcontainer.json</code> file can handle creating and running the Docker container for me. This saves the trouble of manually building and running it—essentially saving two commands on the command line, which adds up to about three seconds. Still, it’s an improvement. However, I am not going to use it.</p>
<p>I had initially planned to solve today’s riddle in <strong>BASIC</strong>—the first programming language I learned 30 years ago. However, it turns out that deploying a BASIC compiler into a container isn</p>
<p>Today, we need to parse a text to find all occurrences of <code>mul(n, m)</code>, calculate the product of <code>n</code> and <code>m</code>, and finally compute the sum of all products. Let&rsquo;s try to find a <em>neat</em> one-liner for that.</p>
<h3 id="solution-of-the-first-part">Solution of the first part</h3>
<p>Here it is:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;input.txt&#34;</span><span class="p">,</span> <span class="s2">&#34;r&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">([</span><span class="n">reduce</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="k">match</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;mul&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">)))</span> <span class="k">for</span> <span class="k">match</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&#34;mul\(\d{1,3},\d{1,3}\)&#34;</span><span class="p">,</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">())]))</span>
</span></span></code></pre></div><p>What am I doing? Well, let’s read it from the inside out:</p>
<p>First, we get all occurrences of <code>mul(n, m)</code>, which is quite easy using regex:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&#34;mul\(\d{1,3},\d{1,3}\)</span>
</span></span></code></pre></div><p>Then, we go through all matching groups using Python&rsquo;s list comprehension feature:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="p">[</span><span class="k">match</span> <span class="k">for</span> <span class="k">match</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&#34;mul\(\d{1,3},\d{1,3}\)&#34;</span><span class="p">,</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">())]</span>
</span></span></code></pre></div><p>But we&rsquo;re not just using the plain result, which is a string like <code>mul(4, 2)</code>. First, we remove <code>mul</code> to get the parentheses, then we evaluate the string into an actual tuple, like <code>(4, 2)</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="k">match</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;mul&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">))</span>
</span></span></code></pre></div><p>Now that we have a list of integers, we can apply multiplication to each item:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">reduce</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</span></span></code></pre></div><p>Each of the products will be fed into the final list. The <code>sum()</code> method simply adds up all the products in the list. The surrounding <code>with ... as file:</code> simply opens the file to read the content.</p>
<h2 id="solution-of-the-second-part">Solution of the second part</h2>
<p>Well, the second part is a little trickier with three additional rules:</p>
<ul>
<li>Only sum up products of <code>mul()</code> if there&rsquo;s the preceding keyword <code>do()</code>.</li>
<li>Ignore all <code>mul()</code> instructions after the keyword <code>dont()</code>.</li>
<li>All <code>mul()</code> instructions at the beginning, where there&rsquo;s neither a <code>dont()</code> nor a <code>do()</code>, need to be considered, too.</li>
</ul>
<p>This sounds easy at first glance, so I tried to figure out a way to simply adjust my regular expression. With no success, but a ton of frustration. However, I figured out a different way that is way more fun and demonstrates the obscure power of list comprehension:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="nb">sum</span><span class="p">([</span><span class="nb">sum</span><span class="p">([</span><span class="nb">sum</span><span class="p">([</span><span class="n">reduce</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="k">match</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;mul&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">)))</span> <span class="k">for</span> <span class="k">match</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&#34;mul\(\d{1,3},\d{1,3}\)&#34;</span><span class="p">,</span> <span class="n">dos</span><span class="p">)])</span> <span class="k">for</span> <span class="n">_j</span><span class="p">,</span> <span class="n">dos</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">donts</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;do()&#34;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:])])</span> <span class="k">for</span> <span class="n">_i</span><span class="p">,</span> <span class="n">donts</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">file_contents</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;don&#39;t()&#34;</span><span class="p">))</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">donts</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;do()&#34;</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">])</span>
</span></span></code></pre></div><p>I guess you have questions? Fair enough. There you go, this is the expanded version:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">sum_of_all</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="k">for</span> <span class="n">_i</span><span class="p">,</span> <span class="n">donts</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">((</span><span class="s1">&#39;do()&#39;</span> <span class="o">+</span> <span class="n">file_contents</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;don&#39;t()&#34;</span><span class="p">)):</span>
</span></span><span class="line"><span class="ln">3</span><span class="cl">    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">donts</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;do()&#34;</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span></span><span class="line"><span class="ln">4</span><span class="cl">        <span class="k">for</span> <span class="n">_j</span><span class="p">,</span> <span class="n">dos</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">donts</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;do()&#34;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]):</span>
</span></span><span class="line"><span class="ln">5</span><span class="cl">            <span class="k">for</span> <span class="k">match</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&#34;mul\(\d{1,3},\d{1,3}\)&#34;</span><span class="p">,</span> <span class="n">dos</span><span class="p">):</span>
</span></span><span class="line"><span class="ln">6</span><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;string: </span><span class="si">{</span><span class="n">match</span><span class="si">}</span><span class="s1"> - list: </span><span class="si">{</span><span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;mul&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">))</span><span class="si">}</span><span class="s1"> -  product: </span><span class="si">{</span><span class="n">reduce</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;mul&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">)))</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">7</span><span class="cl">                <span class="n">sum_of_all</span> <span class="o">+=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="k">match</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;mul&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">)))</span>
</span></span><span class="line"><span class="ln">8</span><span class="cl">
</span></span><span class="line"><span class="ln">9</span><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;sum: </span><span class="si">{</span><span class="n">sum_of_all</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span></code></pre></div><p>The idea is that I simply split the whole text by the string <code>dont()</code> in the first <code>for</code> loop. This returns a list of items, where I know that every <code>mul()</code> must be ignored until I encounter a <code>do()</code> in the string.</p>
<p>This leads to the next operation: Instead of parsing the string, I split each of the strings by the keyword <code>do()</code>. If this string contains <code>do()</code>, I get a list of 2 items. If not, I can ignore the whole string in my outer loop.</p>
<p>Otherwise, I take all items except the first one, and now I can apply the logic from above: using the regular expression to get the list of integers, then multiplying and summing up.</p>
<p>There&rsquo;s a small pitfall: The third rule says that all instructions at the beginning of the string, until the first <code>do()</code> or <code>dont()</code>, need to be considered. The simplest way to handle this is by just adding <code>do()</code> to the initial input string.</p>
<p>In case you&rsquo;re wondering how to go from the seemingly simple connection of nested loops to this nasty nested list comprehension—you achieve it step by step:</p>
<p>First, we iterate through the raw file content:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="p">[</span><span class="n">donts</span> <span class="k">for</span> <span class="n">_i</span><span class="p">,</span> <span class="n">donts</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">((</span><span class="s1">&#39;do()&#39;</span> <span class="o">+</span> <span class="n">file_contents</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;don&#39;t()&#34;</span><span class="p">))]</span>
</span></span></code></pre></div><p>Then, we replace <code>dont()</code> with the next loop:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="p">[[</span><span class="n">dos</span> <span class="k">for</span> <span class="n">_j</span><span class="p">,</span> <span class="n">dos</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">donts</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;do()&#34;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:])]</span> <span class="k">for</span> <span class="n">_i</span><span class="p">,</span> <span class="n">donts</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">((</span><span class="s1">&#39;do()&#39;</span> <span class="o">+</span> <span class="n">file_contents</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;don&#39;t()&#34;</span><span class="p">))]</span>
</span></span></code></pre></div><p>Don&rsquo;t forget to add a condition to skip results with a length of 1:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="p">[[</span><span class="n">dos</span> <span class="k">for</span> <span class="n">_j</span><span class="p">,</span> <span class="n">dos</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">donts</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;do()&#34;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:])]</span> <span class="k">for</span> <span class="n">_i</span><span class="p">,</span> <span class="n">donts</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">((</span><span class="s1">&#39;do()&#39;</span> <span class="o">+</span> <span class="n">file_contents</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;don&#39;t()&#34;</span><span class="p">))</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">donts</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;do()&#34;</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">]</span>
</span></span></code></pre></div><p>Then, we can replace <code>do()</code> with the following loop:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="p">[[[</span><span class="k">match</span> <span class="k">for</span> <span class="k">match</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&#34;mul\(\d{1,3},\d{1,3}\)&#34;</span><span class="p">,</span> <span class="n">dos</span><span class="p">)]</span> <span class="k">for</span> <span class="n">_j</span><span class="p">,</span> <span class="n">dos</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">donts</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;do()&#34;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:])]</span> <span class="k">for</span> <span class="n">_i</span><span class="p">,</span> <span class="n">donts</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">((</span><span class="s1">&#39;do()&#39;</span> <span class="o">+</span> <span class="n">file_contents</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;don&#39;t()&#34;</span><span class="p">))</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">donts</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;do()&#34;</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">]</span>
</span></span></code></pre></div><p>Now we are at the point where we handle the matching groups, so we replace <code>match</code> with everything we need to get a product out of the stringified list of integers:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="p">[[[</span><span class="n">reduce</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="k">match</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;mul&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">)))</span> <span class="k">for</span> <span class="k">match</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&#34;mul\(\d{1,3},\d{1,3}\)&#34;</span><span class="p">,</span> <span class="n">dos</span><span class="p">)]</span> <span class="k">for</span> <span class="n">_j</span><span class="p">,</span> <span class="n">dos</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">donts</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;do()&#34;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:])]</span> <span class="k">for</span> <span class="n">_i</span><span class="p">,</span> <span class="n">donts</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">((</span><span class="s1">&#39;do()&#39;</span> <span class="o">+</span> <span class="n">file_contents</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;don&#39;t()&#34;</span><span class="p">))</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">donts</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;do()&#34;</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">]</span>
</span></span></code></pre></div><p>And eventually, we get the sum of each nested list:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="nb">sum</span><span class="p">([</span><span class="nb">sum</span><span class="p">([</span><span class="nb">sum</span><span class="p">([</span><span class="n">reduce</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="k">match</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;mul&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">)))</span> <span class="k">for</span> <span class="k">match</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&#34;mul\(\d{1,3},\d{1,3}\)&#34;</span><span class="p">,</span> <span class="n">dos</span><span class="p">)])</span> <span class="k">for</span> <span class="n">_j</span><span class="p">,</span> <span class="n">dos</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">donts</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;do()&#34;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:])])</span> <span class="k">for</span> <span class="n">_i</span><span class="p">,</span> <span class="n">donts</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">((</span><span class="s1">&#39;do()&#39;</span> <span class="o">+</span> <span class="n">file_contents</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;don&#39;t()&#34;</span><span class="p">))</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">donts</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;do()&#34;</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">])</span>
</span></span></code></pre></div><p>Looks great, doesn&rsquo;t it?</p>
<h2 id="whats-up-python">Whats up, Python?</h2>
<p><strong>Rating: 14/12 – nice and friendly, always again</strong></p>
<p>Uncontroversial—one of Python&rsquo;s best features is list comprehensions, which also work for dictionaries, sets, and tuples, by the way. List comprehensions have so many features; besides the way you can nest them, you can add conditions in two ways. Either when you add an item to the output list&hellip;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="p">[</span><span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="o">-</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
</span></span></code></pre></div><p>&hellip;or before:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
</span></span></code></pre></div><p>You can loop through multiple lists (et al):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span>
</span></span></code></pre></div><p>You can not only nest them, but also serialize multiple loops to flatten a nested input:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">nested</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">nested</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">sublist</span><span class="p">]</span>
</span></span></code></pre></div><p>And there are probably a couple more that I don&rsquo;t even know.</p>
<p>See you next day&hellip;</p>
    
  </article>
  
  
  
  <div style="margin-top: 5rem; border-top: 2px solid #9a9a9a; padding: 1rem; color: #878787;">
    <h2 style="font-size: 1.3rem; margin-bottom: 1rem;">Summary</h2>
    <div style="font-size: 1rem;">

      <p>A detailed write-up of the author&#39;s Python solution to Day 3 of the Advent of Code 2024 challenge. The article showcases the power of Python&#39;s list comprehensions for parsing text and performing calculations, including a complex nested solution for handling conditional logic in Part 2.</p>
      <br />
      
      <p><strong>Main Topics:</strong>
        
        <span style="background: #e0e0e0; padding: 0.2rem 0.5rem; margin: 0.1rem; border-radius: 3px;">Advent of Code</span>
        
        <span style="background: #e0e0e0; padding: 0.2rem 0.5rem; margin: 0.1rem; border-radius: 3px;">Python</span>
        
        <span style="background: #e0e0e0; padding: 0.2rem 0.5rem; margin: 0.1rem; border-radius: 3px;">List Comprehension</span>
        
        <span style="background: #e0e0e0; padding: 0.2rem 0.5rem; margin: 0.1rem; border-radius: 3px;">Regular Expressions</span>
        
        <span style="background: #e0e0e0; padding: 0.2rem 0.5rem; margin: 0.1rem; border-radius: 3px;">Problem-Solving</span>
        
        <span style="background: #e0e0e0; padding: 0.2rem 0.5rem; margin: 0.1rem; border-radius: 3px;">Text Processing</span>
        
      </p>
      
      
      
      <p><strong>Difficulty:</strong> intermediate</p>
      
      
      
      <p><strong>Reading Time:</strong> approx. 5 minutes</p>
      
    </div>
  </div>
  
  
  
  <div class="paginator">
    
    <a class="link" href="http://localhost:1313/en/2024/2024-12-02-aoc-day-2/">← prev</a>
    
    
    <a class="link" href="http://localhost:1313/en/2024/2024-12-04-aoc-day-4/">next →</a>
    
  </div>
</main>

    <footer id="footer">
  <div>
    <span>© 1979 Nicky Reinert</span> // <span>Powered by </span>
    <a class="link" href="https://gohugo.io/">Hugo</a> // 
    <span>kontakt: nickyreinert -at- gmail -dot- com</span> // 
    <a class="link" href="privacy.html">Datenschutzerklärung</a> // 
    <bold>
      <a class="link lang-btn" href="#" data-lang="de" >
                    <svg width="16" height="12" viewBox="0 0 5 3" xmlns="http://www.w3.org/2000/svg" style="display: inline-block; vertical-align: middle; margin-right: 8px; flex-shrink: 0;">
                    <rect width="5" height="3" fill="#FFCE00"/>
                    <rect width="5" height="2" fill="#DD0000"/>
                    <rect width="5" height="1" fill="#000000"/>
                  </svg>Deutsch</a> // 
      <a class="link lang-btn" href="#" data-lang="en" >
                          <svg width="16" height="12" viewBox="0 0 60 30" xmlns="http://www.w3.org/2000/svg" style="display: inline-block; vertical-align: middle; margin-right: 8px; flex-shrink: 0;">
                    <clipPath id="s-v2">
                      <path d="M0,0 v30 h60 v-30 z"/>
                    </clipPath>
                    <clipPath id="s-v1">
                      <path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/>
                    </clipPath>
                    <g clip-path="url(#s-v2)">
                      <path d="M0,0 v30 h60 v-30 z" fill="#00247d"/>
                      <g clip-path="url(#s-v1)">
                        <path d="M0,0 l60,30 M60,0 l-60,30" stroke="#fff" stroke-width="6"/>
                        <path d="M0,0 l60,30 M60,0 l-60,30" stroke="#cf142b" stroke-width="4"/>
                        <path d="M30,0 v30 M0,15 h60" stroke="#fff" stroke-width="10"/>
                        <path d="M30,0 v30 M0,15 h60" stroke="#cf142b" stroke-width="6"/>
                      </g>
                    </g>
                  </svg>English</a> // 
      <a class="link lang-btn" href="#" data-lang="*" >All(e)</a>
    </bold>
    <br />
<footer>
  <center>
    <a class="default-link" href="https://uberblogr.de/prev/nickyreinert" title="Zurück im Ring">&lt; Zurück im Ring</a> //
    Mitglied im <a class="default-link" href="https://uberblogr.de/home/nickyreinert" title="Mitglied im UberBlogr Webring">UberBlogr Webring</a> //
    <a class="default-link" href="https://uberblogr.de/next/nickyreinert" title="Vor im Ring">Weiter im Ring &gt;</a>
  </center>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var langButtons = document.querySelectorAll('.lang-btn');
      langButtons.forEach(function(btn) {
        btn.addEventListener('click', function(event) {
          event.preventDefault();
          var lang = btn.getAttribute('data-lang');
          var posts = document.querySelectorAll('[data-lang]');
            posts.forEach(function(post) {
              var postLang = post.getAttribute('data-lang');
              if (postLang === lang || lang === '*') {
                post.classList.remove('hidden');
              } else {
                post.classList.add('hidden');
              }
            });
          });
        });
      });
  </script>
</footer>
  </div>

  
  

  
  

</body>

</html>
